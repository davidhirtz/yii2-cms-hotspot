{
  "version": 3,
  "sources": ["hotspot.js"],
  "sourcesContent": ["/**\n * Registers image hotspot tool.\n * This only works if the HotspotAssetBundle is registered first.\n *\n * @param {String} config.formName\n * @param {String} config.url\n * @param {String} config.message\n * @param {Array} config.hotspots\n */\nSkeleton.registerHotspots = function (config) {\n    var $image = $('#image'),\n        $canvas = $image.parent().addClass('hotspot-canvas'),\n        hotspots = config.hotspots || [],\n        zIndex = 0,\n        i;\n\n    if (config.message) {\n        $canvas.closest('form').prepend('<div class=\"alert alert-success\">' + config.message + '</div>');\n    }\n\n    for (i = 0; i < hotspots.length; i++) {\n        setHotspot(hotspots[i]);\n    }\n\n    /**\n     * @param {Object} values\n     * @returns {{}}\n     */\n    function getFormFields(values) {\n        var fields = {};\n        fields[config.formName] = values;\n\n        return fields;\n    }\n\n    /**\n     * @param {String} data.id\n     * @param {String} data.displayName\n     * @param {Number} data.x\n     * @param {Number} data.y\n     * @param {String} data.url\n     */\n    function setHotspot(data) {\n        var $btn = $('<a href=\"' + data.url + '\" class=\"hotspot-btn\" title=\"' + data.displayName + '\"><i class=\"hotspot-icon fas fa-plus\"></i></a>')\n                .appendTo($canvas)\n                .tooltip(),\n            btnOffsetX = $btn.outerWidth() / 2,\n            btnOffsetY = $btn.outerHeight() / 2;\n\n        $btn\n            .css({\n                left: 'calc(' + data.x + '% - ' + btnOffsetX + 'px)',\n                top: 'calc(' + data.y + '% - ' + btnOffsetY + 'px)',\n                zIndex: zIndex++\n            })\n            .draggable({\n                containment: $canvas,\n                start: function () {\n                    $btn.css('z-index', zIndex + 1).tooltip('disable').tooltip('hide').addClass('dragging');\n                },\n                stop: function () {\n                    $.post(data.url, getFormFields({\n                        x: ($btn.position().left + btnOffsetX) / $canvas.width() * 100,\n                        y: ($btn.position().top + btnOffsetY) / $canvas.height() * 100,\n                        position: zIndex + 1\n                    }));\n\n                    setTimeout(function () {\n                        $btn.tooltip('enable').removeClass('dragging');\n                    }, 1);\n                }\n            })\n            .on('click', function (e) {\n                if ($btn.hasClass('dragging')) {\n                    e.preventDefault();\n                }\n            });\n    }\n\n    $image.on('dblclick', function (e) {\n        var fields = getFormFields({\n            x: (e.pageX - $canvas.offset().left) / $canvas.width() * 100,\n            y: (e.pageY - $canvas.offset().top) / $canvas.height() * 100,\n            position: hotspots.length + 1\n        });\n\n        $.post(config.url, fields).done(function (data) {\n            setHotspot(data);\n        });\n    });\n};"],
  "mappings": "AASA,SAAS,iBAAmB,SAAUA,EAAQ,CAC1C,IAAIC,EAAS,EAAE,QAAQ,EACnBC,EAAUD,EAAO,OAAO,EAAE,SAAS,gBAAgB,EACnDE,EAAWH,EAAO,UAAY,CAAC,EAC/BI,EAAS,EACT,EAMJ,IAJIJ,EAAO,SACPE,EAAQ,QAAQ,MAAM,EAAE,QAAQ,oCAAsCF,EAAO,QAAU,QAAQ,EAG9F,EAAI,EAAG,EAAIG,EAAS,OAAQ,IAC7BE,EAAWF,EAAS,CAAC,CAAC,EAO1B,SAASG,EAAcC,EAAQ,CAC3B,IAAIC,EAAS,CAAC,EACd,OAAAA,EAAOR,EAAO,QAAQ,EAAIO,EAEnBC,CACX,CASA,SAASH,EAAWI,EAAM,CACtB,IAAIC,EAAO,EAAE,YAAcD,EAAK,IAAM,gCAAkCA,EAAK,YAAc,gDAAgD,EAClI,SAASP,CAAO,EAChB,QAAQ,EACbS,EAAaD,EAAK,WAAW,EAAI,EACjCE,EAAaF,EAAK,YAAY,EAAI,EAEtCA,EACK,IAAI,CACD,KAAM,QAAUD,EAAK,EAAI,OAASE,EAAa,MAC/C,IAAK,QAAUF,EAAK,EAAI,OAASG,EAAa,MAC9C,OAAQR,GACZ,CAAC,EACA,UAAU,CACP,YAAaF,EACb,MAAO,UAAY,CACfQ,EAAK,IAAI,UAAWN,EAAS,CAAC,EAAE,QAAQ,SAAS,EAAE,QAAQ,MAAM,EAAE,SAAS,UAAU,CAC1F,EACA,KAAM,UAAY,CACd,EAAE,KAAKK,EAAK,IAAKH,EAAc,CAC3B,GAAII,EAAK,SAAS,EAAE,KAAOC,GAAcT,EAAQ,MAAM,EAAI,IAC3D,GAAIQ,EAAK,SAAS,EAAE,IAAME,GAAcV,EAAQ,OAAO,EAAI,IAC3D,SAAUE,EAAS,CACvB,CAAC,CAAC,EAEF,WAAW,UAAY,CACnBM,EAAK,QAAQ,QAAQ,EAAE,YAAY,UAAU,CACjD,EAAG,CAAC,CACR,CACJ,CAAC,EACA,GAAG,QAAS,SAAUG,EAAG,CAClBH,EAAK,SAAS,UAAU,GACxBG,EAAE,eAAe,CAEzB,CAAC,CACT,CAEAZ,EAAO,GAAG,WAAY,SAAUY,EAAG,CAC/B,IAAIL,EAASF,EAAc,CACvB,GAAIO,EAAE,MAAQX,EAAQ,OAAO,EAAE,MAAQA,EAAQ,MAAM,EAAI,IACzD,GAAIW,EAAE,MAAQX,EAAQ,OAAO,EAAE,KAAOA,EAAQ,OAAO,EAAI,IACzD,SAAUC,EAAS,OAAS,CAChC,CAAC,EAED,EAAE,KAAKH,EAAO,IAAKQ,CAAM,EAAE,KAAK,SAAUC,EAAM,CAC5CJ,EAAWI,CAAI,CACnB,CAAC,CACL,CAAC,CACL",
  "names": ["config", "$image", "$canvas", "hotspots", "zIndex", "setHotspot", "getFormFields", "values", "fields", "data", "$btn", "btnOffsetX", "btnOffsetY", "e"]
}
